@page "/register"
@inject AuthService AuthService
@inject NavigationManager Navigation


<h3 class="text-center text-primary mb-4">Register</h3>

<EditForm Model="registerModel" OnValidSubmit="HandleRegister" class="p-4 border rounded shadow-sm bg-light mx-auto" style="max-width: 400px;">
    <DataAnnotationsValidator />
    <ValidationSummary class="text-danger" />

    <div class="form-group mb-3">
        <label for="username" class="form-label">Username</label>
        <div class="input-group">
            <span class="input-group-text">
                <i class="bi bi-person"></i>
            </span>
            <InputText id="username" @bind-Value="registerModel.usuario" class="form-control" placeholder="Digite seu username" />
        </div>
    </div>

    <div class="form-group mb-3">
        <label for="password" class="form-label">Password</label>
        <div class="input-group">
            <span class="input-group-text">
                <i class="bi bi-lock"></i>
            </span>
            <InputText id="password" @bind-Value="registerModel.senha" class="form-control" placeholder="Digite sua senha" type="password" />
        </div>
    </div>

    <button type="submit" class="btn btn-success w-100">Register</button>
</EditForm>


@code {
    private RegisterModel registerModel = new RegisterModel();

    private async Task HandleRegister()
    {
        var success = await AuthService.RegisterAsync(registerModel);
        if (success)
        {
            Navigation.NavigateTo("/login");
        }
    }
}

